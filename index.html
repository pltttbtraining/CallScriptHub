<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Call Script Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
<style>
  /* --- General Styles --- */
  * {margin:0;padding:0;box-sizing:border-box;font-family:'Prompt',sans-serif;}
  body {background-color:#0D1F3C;color:#0D1F3C;}
  h2,h3{font-weight:600;margin-bottom:0.5em;}
  button{cursor:pointer;font-family:'Prompt',sans-serif;}
  
  /* --- Login Styles --- */
  #loginPage{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#0D1F3C;color:#fff;padding:1em;}
  .role-btn{background:#1E90FF;color:#fff;padding:1em 2em;margin:1em;border:none;border-radius:20px;box-shadow:0 3px 6px rgba(0,0,0,0.2);font-size:1.2em;transition:transform 0.2s;}
  .role-btn:active{transform:scale(0.95);}
  
  /* --- Tab & Card Styles --- */
  #mainApp{display:none;flex-direction:column;height:100vh;}
  .tabs{display:flex;justify-content:space-around;background:#0D1F3C;color:#fff;}
  .tab-btn{flex:1;padding:0.8em;text-align:center;cursor:pointer;font-weight:600;}
  .tab-btn.active{background:#1E90FF;}
  .tab-content{flex:1;overflow-y:auto;padding:1em;background:#fff;color:#0D1F3C;}
  .card{background:#f0f8ff;border-radius:12px;padding:1em;margin-bottom:1em;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
  .card h3{margin-bottom:0.5em;}
  .card p{font-size:0.9em;line-height:1.4em;}
  .toggle-detail{color:#1E90FF;text-decoration:underline;cursor:pointer;font-size:0.9em;margin-top:0.5em;}
  .hidden{display:none;}
  .filter-btn{padding:0.5em 1em;margin:0.5em;border:none;border-radius:12px;background:#1E90FF;color:#fff;font-size:0.9em;}
  
  /* --- Objection Table --- */
  table{width:100%;border-collapse:collapse;margin-top:1em;}
  th,td{padding:0.5em;border:1px solid #ccc;text-align:left;}
  th{background:#1E90FF;color:#fff;}
  
  /* --- Q&A Board --- */
  .qa-card{background:#e6f2ff;border-radius:12px;padding:1em;margin-bottom:1em;}
  .qa-card .answer{margin-top:0.5em;padding:0.5em;background:#fff;border-radius:8px;}
  input,textarea{width:100%;padding:0.5em;margin-top:0.5em;border-radius:8px;border:1px solid #ccc;}
  .submit-btn{background:#1E90FF;color:#fff;padding:0.7em 1.5em;border:none;border-radius:12px;margin-top:0.5em;}
  
  /* --- Trainer Management --- */
  .admin-panel{background:#f0f8ff;padding:1em;border-radius:12px;margin-bottom:1em;}
  .admin-panel input, .admin-panel textarea, .admin-panel select{margin-bottom:0.5em;}
</style>
</head>
<body>

<!-- ================== LOGIN ================== -->
<div id="loginPage">
  <h2>Call Script Hub</h2>
  <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Role ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
  <button class="role-btn" onclick="roleLogin('user')">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</button>
  <button class="role-btn" onclick="roleLogin('trainer')">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£ / ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</button>
</div>

<!-- ================== MAIN APP ================== -->
<div id="mainApp">
  <!-- Tabs -->
  <div class="tabs">
    <div class="tab-btn active" onclick="showTab('scriptsTab')">üìò Scripts</div>
    <div class="tab-btn" onclick="showTab('objectionTab')">‚ö° Objections</div>
    <div class="tab-btn" onclick="showTab('qaTab')">üí¨ Q&A</div>
    <div class="tab-btn" onclick="showTab('trainerTab')">üõ† Trainer</div>
  </div>
  
  <!-- Tab Contents -->
  <div class="tab-content" id="scriptsTab">
    <div>
      <button class="filter-btn" onclick="filterScripts('new')">New Customer</button>
      <button class="filter-btn" onclick="filterScripts('familiar')">Familiar Customer</button>
      <button class="filter-btn" onclick="filterScripts('vip')">VIP Customer</button>
    </div>
    <div id="scriptList"></div>
  </div>
  
  <div class="tab-content hidden" id="objectionTab">
    <h3>Objection Library</h3>
    <table>
      <thead>
        <tr><th>Category</th><th>Question</th><th>Answer</th></tr>
      </thead>
      <tbody id="objectionTable"></tbody>
    </table>
  </div>
  
  <div class="tab-content hidden" id="qaTab">
    <h3>Q&A Board</h3>
    <div>
      <input type="text" id="qaUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
      <textarea id="qaQuestion" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"></textarea>
      <button class="submit-btn" onclick="postQA()">Post Question</button>
    </div>
    <div id="qaList"></div>
  </div>
  
  <div class="tab-content hidden" id="trainerTab">
    <h3>Trainer Script Management</h3>
    <div class="admin-panel">
      <input type="text" id="adminTitle" placeholder="Script Title">
      <select id="adminType">
        <option value="new">New Customer</option>
        <option value="familiar">Familiar Customer</option>
        <option value="vip">VIP Customer</option>
      </select>
      <textarea id="adminContent" placeholder="Script Content"></textarea>
      <button class="submit-btn" onclick="addScript()">Add / Update Script</button>
    </div>
    <div id="trainerScriptList"></div>
  </div>
</div>

<script>
// ================== INITIAL DATA ==================
const initialScripts = [
  // New Customer Scripts
  {type: 'new', title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏õ‡∏µ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î', content: 'Step 1: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏ö‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£‡πÅ‡∏ö‡∏ö Service Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏à‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ\nStep 3: ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°'},
  {type: 'new', title: '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏Ç‡∏≤‡∏•‡∏á', content: 'Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÅ‡∏ö‡∏ö Friendly Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏î ‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≤‡∏à‡πÇ‡∏ï‡∏ä‡πâ‡∏≤‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°\nStep 3: ‡πÄ‡∏™‡∏ô‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏ö‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô'},
  
  // Familiar Customer Scripts  
  {type: 'familiar', title: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥', content: 'Step 1: ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢\nStep 2: ‡πÅ‡∏à‡πâ‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß\nStep 3: ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'},
  {type: 'familiar', title: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢', content: 'Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢ Service Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏•‡∏î ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≤‡∏à‡πÇ‡∏ï‡∏ä‡πâ‡∏≤\nStep 3: ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï'},
  
  // VIP Customer Scripts
  {type: 'vip', title: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏†‡∏≤‡∏©‡∏µ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö VIP', content: 'Step 1: ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ VIP\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°\nStep 3: ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'},
  {type: 'vip', title: '‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ VIP', content: 'Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö Professional Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏•‡∏î ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô\nStep 3: ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï'}
];

const initialObjections = [
  {category:'Time', question:'‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢', answer:'‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏Ñ‡πà 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏≠‡∏á'},
  {category:'Interest', question:'‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à', answer:'‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡πà‡∏∞ ‡πÅ‡∏Ñ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ü‡∏£‡∏µ ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏™‡∏ô‡πÉ‡∏à‡∏ï‡∏£‡∏ß‡∏à‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á'},
  {category:'Authority', question:'‡∏°‡∏µ‡∏Ñ‡∏ô‡∏î‡∏π‡πÅ‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', answer:'‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ã‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à'},
  {category:'Price', question:'‡∏Å‡∏•‡∏±‡∏ß‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢', answer:'‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ü‡∏£‡∏µ‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö'},
  {category:'Other', question:'‡∏Å‡∏•‡∏±‡∏ß‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á', answer:'‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ü‡∏£‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≤‡∏¢‡πÉ‡∏î ‡πÜ'}
];

// ================== INITIALIZE DATA ==================
function initializeData() {
  if (!localStorage.getItem('scriptsData')) {
    localStorage.setItem('scriptsData', JSON.stringify(initialScripts));
  }
  if (!localStorage.getItem('objectionsData')) {
    localStorage.setItem('objectionsData', JSON.stringify(initialObjections));
  }
  if (!localStorage.getItem('qaData')) {
    localStorage.setItem('qaData', JSON.stringify([]));
  }
}

// ================== ROLE LOGIN ==================
let currentRole = null;
function roleLogin(role){
  let question = '';
  let answer = '';
  if(role==='user'){
    question='‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ö‡∏≠‡∏Å‡∏Ç‡πâ‡∏≤‡πÄ‡∏ó‡∏¥‡∏î Region ‡πÑ‡∏´‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏õ‡∏ê‡∏û‡∏µ'; 
    answer='rh5';
  } else {
    question='‡∏´‡πä‡∏∞ ‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡∏∞ ‡∏ß‡πà‡∏≤‡πÑ‡∏á‡∏ô‡∏∞ ‡∏´‡πä‡∏∞ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡∏ô‡∏ô‡∏ô‡∏ô'; 
    answer='pru';
  }
  
  let userAnswer = prompt(question,'');
  if(userAnswer && userAnswer.toLowerCase()===answer.toLowerCase()){
    currentRole = role;
    document.getElementById('loginPage').style.display='none';
    document.getElementById('mainApp').style.display='flex';
    initializeData();
    loadScripts();
    loadObjections();
    loadQA();
    if (role === 'trainer') {
      loadTrainerScripts();
    }
  } else {
    alert('‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
  }
}

// ================== TAB FUNCTION ==================
function showTab(tabId){
  document.querySelectorAll('.tab-content').forEach(tc=>tc.classList.add('hidden'));
  document.getElementById(tabId).classList.remove('hidden');
  document.querySelectorAll('.tab-btn').forEach(btn=>btn.classList.remove('active'));
  event.target.classList.add('active');
  
  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ó‡πá‡∏ö
  if (tabId === 'trainerTab' && currentRole === 'trainer') {
    loadTrainerScripts();
  }
}

// ================== SCRIPTS ==================
function loadScripts() {
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Scripts
  filterScripts('new'); // ‡πÇ‡∏´‡∏•‡∏î New Customer ‡πÇ‡∏î‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
}

function filterScripts(type){
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  let listDiv = document.getElementById('scriptList');
  listDiv.innerHTML='';
  
  let filtered = scriptsData.filter(s=>s.type===type);
  if (filtered.length === 0) {
    listDiv.innerHTML = '<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</p>';
    return;
  }
  
  filtered.forEach((s,i)=>{
    let card = document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <h3>${s.title}</h3>
      <p class="toggle-detail" onclick="toggleDetail(${i})">View Details</p>
      <div id="detail${i}" class="hidden">
        <pre>${s.content}</pre>
      </div>
    `;
    listDiv.appendChild(card);
  });
}

function toggleDetail(idx){
  let el = document.getElementById('detail'+idx);
  el.classList.toggle('hidden');
}

// ================== OBJECTIONS ==================
function loadObjections(){
  const objectionsData = JSON.parse(localStorage.getItem('objectionsData')) || [];
  let tbody = document.getElementById('objectionTable');
  tbody.innerHTML='';
  
  objectionsData.forEach(o=>{
    let tr=document.createElement('tr');
    tr.innerHTML=`
      <td>${o.category}</td>
      <td>${o.question}</td>
      <td>${o.answer}</td>
    `;
    tbody.appendChild(tr);
  });
}

// ================== Q&A ==================
function loadQA(){
  const qaData = JSON.parse(localStorage.getItem('qaData')) || [];
  let list = document.getElementById('qaList'); 
  list.innerHTML='';
  
  qaData.forEach((q,i)=>{
    let card = document.createElement('div'); 
    card.className='qa-card';
    card.innerHTML=`
      <b>${q.user}</b>: ${q.question}
      <div class="answer">${q.answer || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö'}</div>
    `;
    list.appendChild(card);
  });
}

function postQA(){
  let user = document.getElementById('qaUser').value;
  let question = document.getElementById('qaQuestion').value;
  if(user && question){
    const qaData = JSON.parse(localStorage.getItem('qaData')) || [];
    qaData.push({user, question, answer: ''});
    localStorage.setItem('qaData', JSON.stringify(qaData));
    
    document.getElementById('qaUser').value='';
    document.getElementById('qaQuestion').value='';
    loadQA();
  } else {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°');
  }
}

// ================== TRAINER MANAGEMENT ==================
function loadTrainerScripts(){
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  let listDiv = document.getElementById('trainerScriptList'); 
  listDiv.innerHTML='';
  
  scriptsData.forEach((s,i)=>{
    let div = document.createElement('div'); 
    div.className='card';
    div.innerHTML=`
      <b>${s.title}</b> [${s.type}]
      <button onclick="editScript(${i})">Edit</button>
      <button onclick="deleteScript(${i})">Delete</button>
      <div style="margin-top: 10px;">
        <pre>${s.content}</pre>
      </div>
    `;
    listDiv.appendChild(div);
  });
}

function addScript(){
  let title = document.getElementById('adminTitle').value;
  let type = document.getElementById('adminType').value;
  let content = document.getElementById('adminContent').value;
  
  if(!title || !content){
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
    return;
  }
  
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  
  // Check if updating existing script with same title
  let existingIndex = scriptsData.findIndex(s => s.title === title && s.type === type);
  
  if(existingIndex > -1){
    // Update existing
    scriptsData[existingIndex] = {title, type, content};
  } else {
    // Add new
    scriptsData.push({title, type, content});
  }
  
  localStorage.setItem('scriptsData', JSON.stringify(scriptsData));
  loadScripts();
  loadTrainerScripts();
  
  // Clear form
  document.getElementById('adminTitle').value = '';
  document.getElementById('adminContent').value = '';
  
  alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
}

function editScript(index){
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  let s = scriptsData[index];
  
  document.getElementById('adminTitle').value = s.title;
  document.getElementById('adminType').value = s.type;
  document.getElementById('adminContent').value = s.content;
}

function deleteScript(index){
  if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')){
    const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
    scriptsData.splice(index, 1);
    localStorage.setItem('scriptsData', JSON.stringify(scriptsData));
    loadScripts();
    loadTrainerScripts();
  }
}

// ================== INITIALIZE APP ==================
document.addEventListener('DOMContentLoaded', function() {
  initializeData();
});
</script>
</body>
</html>
