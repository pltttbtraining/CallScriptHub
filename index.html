<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RH5 Call Script Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  /* --- General Styles --- */
  * {margin:0;padding:0;box-sizing:border-box;font-family:'Prompt',sans-serif;}
  body {background-color:#f5f7fa;color:#333;}
  h2,h3{font-weight:600;margin-bottom:0.5em;}
  button{cursor:pointer;font-family:'Prompt',sans-serif;}
  
  /* --- Login Styles --- */
  #loginPage{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg, #0D1F3C 0%, #1a3a6b 100%);color:#fff;padding:1em;}
  .login-container{background:rgba(255,255,255,0.1);padding:2em;border-radius:20px;backdrop-filter:blur(10px);text-align:center;max-width:400px;width:100%;}
  .role-btn{background:#1E90FF;color:#fff;padding:1em 2em;margin:1em;border:none;border-radius:20px;box-shadow:0 3px 6px rgba(0,0,0,0.2);font-size:1.2em;transition:transform 0.2s;width:100%;}
  .role-btn:hover{background:#0077e6;}
  .role-btn:active{transform:scale(0.95);}
  
  /* --- Dashboard Styles --- */
  #mainApp{display:none;}
  
  /* Header */
  .dashboard-header{background:#0D1F3C;color:#fff;padding:1em 2em;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
  .header-left h1{font-size:1.5em;margin-bottom:0.2em;}
  .header-left p{font-size:0.9em;opacity:0.8;}
  .search-bar{display:flex;background:#fff;border-radius:30px;padding:0.5em 1em;width:300px;}
  .search-bar input{border:none;outline:none;width:100%;padding:0.5em;}
  .search-bar i{color:#0D1F3C;margin:auto;cursor:pointer;}
  
  /* Dashboard Content */
  .dashboard-content{padding:2em;display:grid;grid-template-columns:2fr 1fr;gap:2em;}
  
  /* Welcome Section */
  .welcome-card{background:#fff;border-radius:15px;padding:2em;box-shadow:0 4px 15px rgba(0,0,0,0.05);margin-bottom:2em;}
  .welcome-card h2{color:#0D1F3C;margin-bottom:0.5em;}
  .welcome-card p{color:#666;margin-bottom:1.5em;}
  
  /* Job Status */
  .job-status{background:#fff;border-radius:15px;padding:1.5em;box-shadow:0 4px 15px rgba(0,0,0,0.05);margin-bottom:2em;}
  .job-status h3{margin-bottom:1em;color:#0D1F3C;}
  .status-cards{display:flex;gap:1em;}
  .status-card{flex:1;padding:1.5em;border-radius:10px;text-align:center;color:#fff;}
  .status-card.pending{background:#FF9F43;}
  .status-card.prepare{background:#54A0FF;}
  .status-card.cancel{background:#FF6B6B;}
  .status-card .count{font-size:2em;font-weight:bold;margin-bottom:0.2em;}
  
  /* Services */
  .services{background:#fff;border-radius:15px;padding:1.5em;box-shadow:0 4px 15px rgba(0,0,0,0.05);}
  .services h3{margin-bottom:1em;color:#0D1F3C;}
  .service-grid{display:grid;grid-template-columns:repeat(3, 1fr);gap:1em;}
  .service-card{background:#f8f9fa;border-radius:10px;padding:1.5em;text-align:center;cursor:pointer;transition:transform 0.2s, box-shadow 0.2s;}
  .service-card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,0.1);}
  .service-card i{font-size:2em;color:#1E90FF;margin-bottom:0.5em;}
  
  /* Document Section */
  .document-section{background:#fff;border-radius:15px;padding:1.5em;box-shadow:0 4px 15px rgba(0,0,0,0.05);}
  .document-section h3{margin-bottom:1em;color:#0D1F3C;}
  .document-card{background:#e6f2ff;border-radius:10px;padding:1.5em;text-align:center;}
  .qr-code-container{background:#fff;border-radius:10px;padding:1em;margin:1em auto;display:inline-block;}
  .qr-code{width:200px;height:200px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;margin:0 auto;border:1px dashed #ccc;}
  .qr-code i{font-size:3em;color:#ccc;}
  .upload-btn{background:#1E90FF;color:#fff;border:none;padding:0.7em 1.5em;border-radius:8px;margin-top:1em;cursor:pointer;}
  .document-card p{margin-top:1em;color:#666;}
  
  /* --- Tab & Card Styles (Hidden by default) --- */
  .tab-section{display:none;padding:2em;}
  .tabs{display:flex;justify-content:space-around;background:#0D1F3C;color:#fff;border-radius:10px 10px 0 0;overflow:hidden;}
  .tab-btn{flex:1;padding:0.8em;text-align:center;cursor:pointer;font-weight:600;}
  .tab-btn.active{background:#1E90FF;}
  .tab-content{background:#fff;padding:1.5em;border-radius:0 0 10px 10px;box-shadow:0 4px 15px rgba(0,0,0,0.05);}
  .card{background:#f0f8ff;border-radius:12px;padding:1em;margin-bottom:1em;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
  .card h3{margin-bottom:0.5em;}
  .card p{font-size:0.9em;line-height:1.4em;}
  .toggle-detail{color:#1E90FF;text-decoration:underline;cursor:pointer;font-size:0.9em;margin-top:0.5em;}
  .hidden{display:none;}
  .filter-btn{padding:0.5em 1em;margin:0.5em;border:none;border-radius:12px;background:#1E90FF;color:#fff;font-size:0.9em;}
  
  /* --- Objection Table --- */
  table{width:100%;border-collapse:collapse;margin-top:1em;}
  th,td{padding:0.5em;border:1px solid #ccc;text-align:left;}
  th{background:#1E90FF;color:#fff;}
  
  /* --- Q&A Board --- */
  .qa-card{background:#e6f2ff;border-radius:12px;padding:1em;margin-bottom:1em;}
  .qa-card .answer{margin-top:0.5em;padding:0.5em;background:#fff;border-radius:8px;}
  input,textarea{width:100%;padding:0.5em;margin-top:0.5em;border-radius:8px;border:1px solid #ccc;}
  .submit-btn{background:#1E90FF;color:#fff;padding:0.7em 1.5em;border:none;border-radius:12px;margin-top:0.5em;}
  
  /* --- Trainer Management --- */
  .admin-panel{background:#f0f8ff;padding:1em;border-radius:12px;margin-bottom:1em;}
  .admin-panel input, .admin-panel textarea, .admin-panel select{margin-bottom:0.5em;}
  
  /* --- Back Button --- */
  .back-btn{background:#6c757d;color:#fff;border:none;padding:0.5em 1em;border-radius:8px;margin-bottom:1em;cursor:pointer;}
</style>
</head>
<body>

<!-- ================== LOGIN ================== -->
<div id="loginPage">
  <div class="login-container">
    <h2>RH5 Call Script Hub</h2>
    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Role ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
    <button class="role-btn" onclick="roleLogin('user')">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</button>
    <button class="role-btn" onclick="roleLogin('trainer')">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£ / ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</button>
  </div>
</div>

<!-- ================== DASHBOARD ================== -->
<div id="mainApp">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-left">
      <h1>Welcome Back!</h1>
      <p>RH5 Call Script Hub</p>
      <p>https://us/users/idmsfins-itaninson/idnfo/uploading/admin/8080-RH5</p>
    </div>
    <div class="search-bar">
      <input type="text" placeholder="Search...">
      <i class="fas fa-search"></i>
    </div>
  </div>
  
  <!-- Dashboard Content -->
  <div class="dashboard-content">
    <div class="left-column">
      <!-- Welcome Card -->
      <div class="welcome-card">
        <h2>Welcome Back!</h2>
        <p>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≤‡∏Å‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ô‡∏µ‡πâ</p>
      </div>
      
      <!-- Job Status -->
      <div class="job-status">
        <h3>Your job status</h3>
        <div class="status-cards">
          <div class="status-card pending">
            <div class="count">12</div>
            <div class="label">Pending</div>
          </div>
          <div class="status-card prepare">
            <div class="count">8</div>
            <div class="label">Prepare</div>
          </div>
          <div class="status-card cancel">
            <div class="count">3</div>
            <div class="label">Cancel</div>
          </div>
        </div>
      </div>
      
      <!-- Services -->
      <div class="services">
        <h3>Our services</h3>
        <div class="service-grid">
          <div class="service-card" onclick="showSection('scriptsSection')">
            <i class="fas fa-file-alt"></i>
            <div>Script</div>
          </div>
          <div class="service-card" onclick="showSection('objectionSection')">
            <i class="fas fa-bolt"></i>
            <div>Objection</div>
          </div>
          <div class="service-card" onclick="showSection('qaSection')">
            <i class="fas fa-comments"></i>
            <div>Q&A board</div>
          </div>
          <div class="service-card" onclick="showSection('documentSection')">
            <i class="fas fa-file-pdf"></i>
            <div>Full document</div>
          </div>
          <div class="service-card" onclick="showSection('trainerSection')">
            <i class="fas fa-tools"></i>
            <div>Trainer</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="right-column">
      <!-- Document Section -->
      <div class="document-section">
        <h3>Full document</h3>
        <div class="document-card">
          <p>Can scan to see the document here.</p>
          <div class="qr-code-container">
            <div class="qr-code" id="qrCodeDisplay">
              <i class="fas fa-qrcode"></i>
            </div>
          </div>
          <input type="file" id="qrCodeUpload" accept="image/*" style="display:none;">
          <button class="upload-btn" onclick="document.getElementById('qrCodeUpload').click()">Upload QR Code</button>
          <p id="uploadStatus"></p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ================== SECTIONS ================== -->
  
  <!-- Scripts Section -->
  <div class="tab-section" id="scriptsSection">
    <button class="back-btn" onclick="showDashboard()"><i class="fas fa-arrow-left"></i> Back to Dashboard</button>
    <div class="tabs">
      <div class="tab-btn active" onclick="showScriptTab('scriptsTab')">üìò Scripts</div>
      <div class="tab-btn" onclick="showScriptTab('objectionTab')">‚ö° Objections</div>
      <div class="tab-btn" onclick="showScriptTab('qaTab')">üí¨ Q&A</div>
      <div class="tab-btn" onclick="showScriptTab('trainerTab')">üõ† Trainer</div>
    </div>
    
    <div class="tab-content" id="scriptsTab">
      <div>
        <button class="filter-btn" onclick="filterScripts('new')">New Customer</button>
        <button class="filter-btn" onclick="filterScripts('familiar')">Familiar Customer</button>
        <button class="filter-btn" onclick="filterScripts('vip')">VIP Customer</button>
      </div>
      <div id="scriptList"></div>
    </div>
    
    <div class="tab-content hidden" id="objectionTab">
      <h3>Objection Library</h3>
      <table>
        <thead>
          <tr><th>Category</th><th>Question</th><th>Answer</th></tr>
        </thead>
        <tbody id="objectionTable"></tbody>
      </table>
    </div>
    
    <div class="tab-content hidden" id="qaTab">
      <h3>Q&A Board</h3>
      <div>
        <input type="text" id="qaUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
        <textarea id="qaQuestion" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"></textarea>
        <button class="submit-btn" onclick="postQA()">Post Question</button>
      </div>
      <div id="qaList"></div>
    </div>
    
    <div class="tab-content hidden" id="trainerTab">
      <h3>Trainer Script Management</h3>
      <div class="admin-panel">
        <input type="text" id="adminTitle" placeholder="Script Title">
        <select id="adminType">
          <option value="new">New Customer</option>
          <option value="familiar">Familiar Customer</option>
          <option value="vip">VIP Customer</option>
        </select>
        <textarea id="adminContent" placeholder="Script Content"></textarea>
        <button class="submit-btn" onclick="addScript()">Add / Update Script</button>
      </div>
      <div id="trainerScriptList"></div>
    </div>
  </div>
</div>

<script>
// ================== INITIAL DATA ==================
const initialScripts = [
  // New Customer Scripts
  {type: 'new', title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏õ‡∏µ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î', content: 'Step 1: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏ö‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£‡πÅ‡∏ö‡∏ö Service Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏à‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ\nStep 3: ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°'},
  {type: 'new', title: '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏Ç‡∏≤‡∏•‡∏á', content: 'Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÅ‡∏ö‡∏ö Friendly Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏î ‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≤‡∏à‡πÇ‡∏ï‡∏ä‡πâ‡∏≤‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°\nStep 3: ‡πÄ‡∏™‡∏ô‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏ö‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô'},
  
  // Familiar Customer Scripts  
  {type: 'familiar', title: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥', content: 'Step 1: ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢\nStep 2: ‡πÅ‡∏à‡πâ‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß\nStep 3: ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'},
  {type: 'familiar', title: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢', content: 'Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢ Service Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏•‡∏î ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≤‡∏à‡πÇ‡∏ï‡∏ä‡πâ‡∏≤\nStep 3: ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï'},
  
  // VIP Customer Scripts
  {type: 'vip', title: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏†‡∏≤‡∏©‡∏µ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö VIP', content: 'Step 1: ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ VIP\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°\nStep 3: ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'},
  {type: 'vip', title: '‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ VIP', content: 'Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö Professional Tone\nStep 2: ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏•‡∏î ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô\nStep 3: ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï'}
];

const initialObjections = [
  {category:'Time', question:'‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢', answer:'‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏Ñ‡πà 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏≠‡∏á'},
  {category:'Interest', question:'‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à', answer:'‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡πà‡∏∞ ‡πÅ‡∏Ñ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ü‡∏£‡∏µ ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏™‡∏ô‡πÉ‡∏à‡∏ï‡∏£‡∏ß‡∏à‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á'},
  {category:'Authority', question:'‡∏°‡∏µ‡∏Ñ‡∏ô‡∏î‡∏π‡πÅ‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', answer:'‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ã‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à'},
  {category:'Price', question:'‡∏Å‡∏•‡∏±‡∏ß‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢', answer:'‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ü‡∏£‡∏µ‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö'},
  {category:'Other', question:'‡∏Å‡∏•‡∏±‡∏ß‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á', answer:'‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ü‡∏£‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≤‡∏¢‡πÉ‡∏î ‡πÜ'}
];

// ================== NAVIGATION ==================
function showSection(sectionId) {
  document.querySelector('.dashboard-content').style.display = 'none';
  document.querySelectorAll('.tab-section').forEach(section => {
    section.style.display = 'none';
  });
  document.getElementById(sectionId).style.display = 'block';
}

function showDashboard() {
  document.querySelector('.dashboard-content').style.display = 'grid';
  document.querySelectorAll('.tab-section').forEach(section => {
    section.style.display = 'none';
  });
}

function showScriptTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(tc => tc.classList.add('hidden'));
  document.getElementById(tabId).classList.remove('hidden');
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
}

// ================== INITIALIZE DATA ==================
function initializeData() {
  if (!localStorage.getItem('scriptsData')) {
    localStorage.setItem('scriptsData', JSON.stringify(initialScripts));
  }
  if (!localStorage.getItem('objectionsData')) {
    localStorage.setItem('objectionsData', JSON.stringify(initialObjections));
  }
  if (!localStorage.getItem('qaData')) {
    localStorage.setItem('qaData', JSON.stringify([]));
  }
  if (!localStorage.getItem('qrCode')) {
    localStorage.setItem('qrCode', '');
  } else {
    // Load saved QR code if exists
    const qrCodeData = localStorage.getItem('qrCode');
    if (qrCodeData) {
      document.getElementById('qrCodeDisplay').innerHTML = `<img src="${qrCodeData}" alt="QR Code" style="width:100%;height:100%;object-fit:contain;">`;
    }
  }
}

// ================== ROLE LOGIN ==================
let currentRole = null;
function roleLogin(role){
  let question = '';
  let answer = '';
  if(role==='user'){
    question='‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ö‡∏≠‡∏Å‡∏Ç‡πâ‡∏≤‡πÄ‡∏ó‡∏¥‡∏î Region ‡πÑ‡∏´‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏õ‡∏ê‡∏û‡∏µ'; 
    answer='rh5';
  } else {
    question='‡∏´‡πä‡∏∞ ‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡∏∞ ‡∏ß‡πà‡∏≤‡πÑ‡∏á‡∏ô‡∏∞ ‡∏´‡πä‡∏∞ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡∏ô‡∏ô‡∏ô‡∏ô'; 
    answer='pru';
  }
  
  let userAnswer = prompt(question,'');
  if(userAnswer && userAnswer.toLowerCase()===answer.toLowerCase()){
    currentRole = role;
    document.getElementById('loginPage').style.display='none';
    document.getElementById('mainApp').style.display='block';
    initializeData();
    loadScripts();
    loadObjections();
    loadQA();
    if (role === 'trainer') {
      loadTrainerScripts();
    }
  } else {
    alert('‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
  }
}

// ================== QR CODE UPLOAD ==================
document.getElementById('qrCodeUpload').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(event) {
      const imageData = event.target.result;
      localStorage.setItem('qrCode', imageData);
      document.getElementById('qrCodeDisplay').innerHTML = `<img src="${imageData}" alt="QR Code" style="width:100%;height:100%;object-fit:contain;">`;
      document.getElementById('uploadStatus').textContent = 'QR Code ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
      document.getElementById('uploadStatus').style.color = 'green';
    };
    reader.readAsDataURL(file);
  }
});

// ================== SCRIPTS ==================
function loadScripts() {
  filterScripts('new'); // ‡πÇ‡∏´‡∏•‡∏î New Customer ‡πÇ‡∏î‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
}

function filterScripts(type){
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  let listDiv = document.getElementById('scriptList');
  listDiv.innerHTML='';
  
  let filtered = scriptsData.filter(s=>s.type===type);
  if (filtered.length === 0) {
    listDiv.innerHTML = '<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</p>';
    return;
  }
  
  filtered.forEach((s,i)=>{
    let card = document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <h3>${s.title}</h3>
      <p class="toggle-detail" onclick="toggleDetail(${i})">View Details</p>
      <div id="detail${i}" class="hidden">
        <pre>${s.content}</pre>
      </div>
    `;
    listDiv.appendChild(card);
  });
}

function toggleDetail(idx){
  let el = document.getElementById('detail'+idx);
  el.classList.toggle('hidden');
}

// ================== OBJECTIONS ==================
function loadObjections(){
  const objectionsData = JSON.parse(localStorage.getItem('objectionsData')) || [];
  let tbody = document.getElementById('objectionTable');
  tbody.innerHTML='';
  
  objectionsData.forEach(o=>{
    let tr=document.createElement('tr');
    tr.innerHTML=`
      <td>${o.category}</td>
      <td>${o.question}</td>
      <td>${o.answer}</td>
    `;
    tbody.appendChild(tr);
  });
}

// ================== Q&A ==================
function loadQA(){
  const qaData = JSON.parse(localStorage.getItem('qaData')) || [];
  let list = document.getElementById('qaList'); 
  list.innerHTML='';
  
  qaData.forEach((q,i)=>{
    let card = document.createElement('div'); 
    card.className='qa-card';
    card.innerHTML=`
      <b>${q.user}</b>: ${q.question}
      <div class="answer">${q.answer || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö'}</div>
    `;
    list.appendChild(card);
  });
}

function postQA(){
  let user = document.getElementById('qaUser').value;
  let question = document.getElementById('qaQuestion').value;
  if(user && question){
    const qaData = JSON.parse(localStorage.getItem('qaData')) || [];
    qaData.push({user, question, answer: ''});
    localStorage.setItem('qaData', JSON.stringify(qaData));
    
    document.getElementById('qaUser').value='';
    document.getElementById('qaQuestion').value='';
    loadQA();
  } else {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°');
  }
}

// ================== TRAINER MANAGEMENT ==================
function loadTrainerScripts(){
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  let listDiv = document.getElementById('trainerScriptList'); 
  listDiv.innerHTML='';
  
  scriptsData.forEach((s,i)=>{
    let div = document.createElement('div'); 
    div.className='card';
    div.innerHTML=`
      <b>${s.title}</b> [${s.type}]
      <button onclick="editScript(${i})">Edit</button>
      <button onclick="deleteScript(${i})">Delete</button>
      <div style="margin-top: 10px;">
        <pre>${s.content}</pre>
      </div>
    `;
    listDiv.appendChild(div);
  });
}

function addScript(){
  let title = document.getElementById('adminTitle').value;
  let type = document.getElementById('adminType').value;
  let content = document.getElementById('adminContent').value;
  
  if(!title || !content){
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
    return;
  }
  
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  
  // Check if updating existing script with same title
  let existingIndex = scriptsData.findIndex(s => s.title === title && s.type === type);
  
  if(existingIndex > -1){
    // Update existing
    scriptsData[existingIndex] = {title, type, content};
  } else {
    // Add new
    scriptsData.push({title, type, content});
  }
  
  localStorage.setItem('scriptsData', JSON.stringify(scriptsData));
  loadScripts();
  loadTrainerScripts();
  
  // Clear form
  document.getElementById('adminTitle').value = '';
  document.getElementById('adminContent').value = '';
  
  alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
}

function editScript(index){
  const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
  let s = scriptsData[index];
  
  document.getElementById('adminTitle').value = s.title;
  document.getElementById('adminType').value = s.type;
  document.getElementById('adminContent').value = s.content;
}

function deleteScript(index){
  if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')){
    const scriptsData = JSON.parse(localStorage.getItem('scriptsData')) || [];
    scriptsData.splice(index, 1);
    localStorage.setItem('scriptsData', JSON.stringify(scriptsData));
    loadScripts();
    loadTrainerScripts();
  }
}

// ================== INITIALIZE APP ==================
document.addEventListener('DOMContentLoaded', function() {
  initializeData();
});
</script>
</body>
</html>
